<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-91362999-4"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-91362999-4");
    </script>
    <link rel="shortcut icon" href="../img/favicon.ico" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css"
    />
    <link rel="stylesheet" href="../css/styles.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Automate the creation of banners with dynamic text insertion into a slide and image exporting"
    />
    <title>Banner Engine | Create web banners automatically | Ben Ronkin</title>
  </head>

  <body>
    <main>
      <nav>
        <div class="nav-wrapper">
          <a href="../index.html" class="brand-logo" style="margin-left: 20px"
            >Ben Ronkin</a
          >
        </div>
      </nav>

      <div class="container">
        <h1>Buy a Banner Engine license</h1>

        <div class="row">
          <div class="col s12 m6">
            <h2>Enter your email address</h2>
            <p>
              Once you complete the purchase, you will receive an email receipt
              that includes the license key for your addon.
            </p>
            <p>
              (I will never sell or share your email address, or send you any
              marketing materials.)
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col s12 m6">
            <form id="payment-form">
              <input
                required
                type="email"
                name="email-address"
                id="email-address"
                placeholder="Enter your email address"
              />
              <button class="btn" type="submit">Continue to payment</button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <footer class="page-footer">
      <div class="footer-copyright">
        <div class="container space-between">
          <div>
            <a href="index.html">Banner Engine</a> |
            <a href="privacy.html">Privacy</a> |
            <a href="terms.html">Terms</a> |
            <a href="../contact.html">Contact</a>
          </div>
          <span>Â© 2022 Copyright Ben Ronkin</span>
        </div>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document
          .querySelector("#payment-form")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            const url =
              "https://script.google.com/macros/s/AKfycbwTDsKFeibiPp3wR86ZxObWLJxqQlIkje0BOIFUIsbidiGg_SUo6JnJfDTlJ0WeE8rg4g/exec?d=s";
            const headers = new Headers();
            headers.append("Content-Type", "text/plain;charset=utf-8");
            const req = new Request(url, {
              method: "POST",
              redirect: "follow",
              headers,
              body: JSON.stringify({
                email: document.querySelector("#email-address").value,
              }),
            });
            fetch(req)
              .then(response => response.json())
              .then(data => {
                if (data.status == "error") {
                  console.log(data);
                } else if (data.url) {
                  window.open(data.url);
                  setTimeout(1000, window.close());
                }
              })
              .catch(err => console.log(err));
          });
      });
    </script>
  </body>
</html>
